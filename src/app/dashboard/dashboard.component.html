<!-- src/app/dashboard/dashboard.component.html -->
<div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

<button (click)="logout()">Logout</button>

<div *ngIf="userMe">
  <h1>Welcome, {{ userMe?.firstName }} {{ userMe?.lastName }} ({{ userMe?.login }})</h1>
  
  <!-- Create Board Section -->
  <button (click)="toggleBoardForm()">
    {{ showBoardForm ? 'Cancel' : 'Create Board' }}
  </button>
  
  <div *ngIf="showBoardForm">
    <form [formGroup]="boardForm" (ngSubmit)="onCreateBoard()">
      <label for="name">Board Name:</label>
      <input id="name" formControlName="name" type="text" />

      <label for="description">Description:</label>
      <input id="description" formControlName="description" type="text" />

      <button type="submit" [disabled]="boardForm.invalid">Submit</button>
    </form>
  </div>

  <h2>Your Boards</h2>
  <div *ngIf="userMe?.boards && userMe.boards.length > 0; else noBoards">
    <div *ngFor="let board of userMe.boards" class="board">
      <h3>
        {{ board.name }}
        <!-- Open Board Button -->
        <button (click)="openBoard(board.id)">Open Board</button>
        <!-- Edit Board Button -->
        <button *ngIf="editBoardId !== board.id" (click)="onStartEditBoard(board)">Edit Board</button>
        <!-- Delete Board Button -->
        <button (click)="onDeleteBoard(board)">Delete Board</button>
      </h3>
      
      <!-- Edit Form: visible only if this board is in edit mode -->
      <div *ngIf="editBoardId === board.id">
        <form [formGroup]="editBoardForm" (ngSubmit)="onUpdateBoard()">
          <label for="editName">Name:</label>
          <input id="editName" formControlName="name" type="text" />
          <label for="editDescription">Description:</label>
          <input id="editDescription" formControlName="description" type="text" />
          <button type="submit" [disabled]="editBoardForm.invalid">Save</button>
          <button type="button" (click)="editBoardId = null; editBoardForm.reset()">Cancel</button>
        </form>
      </div>
      
      <p>{{ board.description }}</p>
    </div>
  </div>
  <ng-template #noBoards>
    <p>You have no boards.</p>
  </ng-template>
</div>
